<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reject Item | Swap Shop</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <%- include('partials/header') %>
  <div class="container" style="margin:1rem 0;">
    <a href="/admin?user=<%= user.email %>" class="btn btn-secondary">
        ‚Üê Back to Admin
    </a>
  </div>

  <div class="container" style="max-width:600px;margin:2rem auto;">

    
    <h2 style="margin: 2rem 0 1rem;">Deny Item</h2>

    <!-- Display the item like on the dashboard -->
    <div class="items-grid">
      <div class="item-card">
        <img src="/uploads/<%= item.ImageFolder %>/<%= item.Images.split(',')[0] %>"
             alt="<%= item.Title %>"
             style="width:100%; height:180px; object-fit:cover;">
        <div class="item-info">
          <h3><%= item.Title %></h3>
          <span class="status <%= item.Status.toLowerCase() %>"><%= item.Status %></span>
          <% if (item.ReservedBy) { %>
            <p style="font-size:0.8rem;color:#666;margin-top:0.5rem;">
              Reserved by <%= item.ReservedBy.split('@')[0] %>
            </p>
          <% } %>
          <p style="margin-top:0.5rem;"><%= item.Description %></p>
        </div>
      </div>
    </div>

    <!-- Rejection reason form -->
    <form action="/admin/reject/<%= itemId %>?user=<%= user.email %>" method="POST" style="margin-top:2rem;">
      <label for="reason">Reason for rejection *</label>
      <div class="form-group">
        <textarea name="reason" id="reason" required style="width:100%;height:100px;margin-top:0.5rem;"></textarea>
      </div>  
      <button type="submit" class="btn btn-primary" style="margin-top:1rem;">Submit</button>
    </form>
  </div>
</body>
</html>
