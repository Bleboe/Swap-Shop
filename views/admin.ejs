<!DOCTYPE html>
<html>
<head>
  <title>Admin | Swap Shop</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>

  <%- include('partials/header') %>

  <div class="container">

    <h2 style="margin: 2rem 0 1rem;">Pending Item Approvals</h2>

    <% if (pending.length === 0) { %>
      <p>No pending items.</p>
    <% } else { %>
      <div class="items-grid">
        <% pending.forEach(item => { %>
          <div class="item-card">
            <img src="/uploads/<%= item.ImageFolder %>/<%= item.Images.split(',')[0] %>" 
                 alt="<%= item.Title %>"
                 style="width:100%;height:180px;object-fit:cover;">
            <div class="item-info">
              <h3><%= item.Title %></h3>
              <p><%= item.Description %></p>

              <form action="/admin/approve/<%= item.ID %>?user=<%= user.email %>" method="POST" style="margin-top:10px;">
                <button type="submit" class="btn btn-primary">Approve</button>
              </form>

              <form action="/admin/delete/<%= item.ID %>?user=<%= user.email %>" method="POST" style="margin-top:5px;">
                <button type="submit" class="btn btn-danger">Reject</button>
              </form>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>


    <h2 style="margin: 2rem 0 1rem;">Approved Items</h2>

    <% if (approved.length === 0) { %>
      <p>No approved items yet.</p>
    <% } else { %>
      <div class="items-grid">
        <% approved.forEach(item => { %>
          <div class="item-card">
            <img src="/uploads/<%= item.ImageFolder %>/<%= item.Images.split(',')[0] %>" 
                 alt="<%= item.Title %>"
                 style="width:100%;height:180px;object-fit:cover;">
            <div class="item-info">
              <h3><%= item.Title %></h3>
              <p><%= item.Description %></p>
              <span class="status approved">Approved</span>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>

  </div>
</body>
</html>
